# TA採点支援システム

プログラミング演習のTA業務を支援するWebアプリケーションです。学生の提出物を確認し、フィードバックを効率的に記入できます。

## 機能

- 📝 学生リストの表示（提出状況・レビュー状態の確認）
- 🔍 提出コードとテスト履歴の閲覧
- ✍️ フィードバックコメントの記入・保存
- ⚡ キーボードショートカットによる効率的な操作
- 🤖 自動チェック機能（ファイル不備・ヘッダー記入漏れの検出）
- 📊 CSVエクスポート機能

## セットアップ

### 必要な環境

- Python 3.9以上
- Node.js 14以上

### バックエンドのセットアップ

```bash
cd backend
pip install -r requirements.txt
```

### フロントエンドのセットアップ

```bash
cd frontend
npm install
```

## 使い方

### 1. データの準備

`backend/data/{課題名}/`ディレクトリに以下のファイルを配置：

- `list.csv`: Moodleからエクスポートした学生リスト
- `{課題名(variableなど)}/`: ダウンロードした学生の提出ファイルを含むディレクトリ

### 2. アプリケーションの起動

バックエンドの起動：
```bash
cd backend
python app.py
```

フロントエンドの起動：
```bash
cd frontend
npm run dev
```

### 3. ブラウザでアクセス

http://localhost:5173 をブラウザで開く

## キーボードショートカット

| ショートカット | 動作 |
|------------|------|
| Cmd/Ctrl + S | フィードバックを保存 |
| Cmd/Ctrl + Enter | 保存して次の学生へ |
| Cmd/Ctrl + ← | 前の学生へ |
| Cmd/Ctrl + → | 次の学生へ |

## ステータス表示

- ✅ レビュー済み
- ⚠️ 自動指摘あり（要確認）
- 📝 未レビュー

## ファイル構成

```
ta_grading/
├── backend/
│   ├── app.py                 # Flaskサーバー
│   ├── data/
│   │   └── r_1_variable/
│   │       ├── list.csv       # 学生リスト（元データ）
│   │       ├── list_feedback.csv  # フィードバック付きリスト
│   │       ├── review_status.json # レビュー状態
│   │       └── variable/      # 提出ファイルフォルダ
│   └── requirements.txt
├── frontend/
│   ├── src/
│   │   ├── App.jsx           # メインコンポーネント
│   │   └── index.js
│   └── package.json
└── README.md
```

## 自動チェック機能

以下の項目を自動でチェックし、フィードバック欄に表示：

1. **ファイル不備チェック**
   - 必要なファイル（`variable.c`と`variable-test-history.txt`）の存在確認
   
2. **ヘッダー記入チェック**
   - 学籍番号、名前、課題番号の記入確認

## データ管理

- フィードバックは`list_feedback.csv`に自動保存
- レビュー状態は`review_status.json`で管理
- CSVエクスポート機能でMoodleへのインポート用データを生成可能

## 注意事項

- ファイル名を間違えて提出した学生（例：`r_1_variable.c`や`hello_world.c`）も正しく処理されます
- 自動保存機能により、入力中のフィードバックが一時的に保持されます
- ブラウザをリロードしても未保存のフィードバックは保持されます

## トラブルシューティング

### ポートが使用中の場合

バックエンドのポートを変更：
```python
# app.py の最後の行を変更
app.run(debug=True, port=5001)  # 5000から5001に変更
```

### 文字化けが発生する場合

CSVファイルのエンコーディングをUTF-8 with BOMで保存してください。

## ライセンス

内部使用専用